<!DOCTYPE html><html lang="en"><title>表单配置化思考 - OS</title><meta charset="utf-8"><meta content="表单配置化思考"name="description"><meta content="表单配置化 表格配置化 vue element form table Configuration"name="keywords"><meta content="Code &amp; Life"name="subtitle"><meta content="zowiegong"name="author"><meta content="zh-CN"name="language"><meta content="Asia/Shanghai"name="timezone"><meta content="width=device-width,initial-scale=1"name="viewport"><link href="/manifest.json"rel="manifest"><link href="/atom.xml"rel="alternate"type="application/atom+xml"><link href="/images/favicon.ico"rel="shortcut icon"type="image/x-icon"><link href="/css/style.css"rel="stylesheet"><link href="/css/post.css"rel="stylesheet"><meta content="Hexo 4.2.0"name="generator"><header id="header-container"><h1 id="blog-title"><a href="/">OS</a></h1><nav><ul class="menu-list"><li class="menu-list-item"><a href="/categories"class="menu-name">categories</a><li class="menu-list-item"><a href="/tags"class="menu-name">tags</a><li class="menu-list-item"><a href="/about"class="menu-name">about</a></ul></nav></header><article class="main"><h1 id="post-title">表单配置化思考</h1><div class="post-info"><time class="post-date">2019-07-12</time></div><section class="markdown-body"><blockquote><p>基于 Vue、Element，对表单配置化的<a href="https://github.com/maggie-wayne/conf-table-form-lib"target="_blank"rel="noopener">一个实现 <img alt="conf-table-form-lib"data-canonical-src="https://img.shields.io/github/stars/maggie-wayne/conf-table-form-lib.svg?style=social"src="https://camo.githubusercontent.com/8637197af53a1f536d6d166f6cbd49b87490c146/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f6d61676769652d7761796e652f636f6e662d7461626c652d666f726d2d6c69622e7376673f7374796c653d736f6369616c"style="max-width:100%;"></a></blockquote><p>在偏后台系统的界面中，大多数页面都是表单、表格，这类页面占据了大多数开发时间。<p>业务逻辑也通常集中在表单、表格上，字段多、改动频繁、维护成本高。<p>如果能把这一部分独立出来，代码会更加条理清晰、可维护，也许能减少一些工作量？<h2><a href="#%E7%BB%84%E4%BB%B6%E5%8C%96-vs-%E9%85%8D%E7%BD%AE%E5%8C%96"class="anchor"aria-hidden="true"id="user-content-组件化-vs-配置化"><span aria-hidden="true"class="octicon octicon-link"></span></a>组件化 Vs 配置化</h2><p>如何把表单的渲染与表单的业务逻辑从页面中剥离出来？<p>让页面代码容器化，专注与获取、处理数据承载组件以及做一些与业务无关的事情，尽量减少后期需求变更对这一部分代码的修改。<h3><a href="#%E7%BB%84%E4%BB%B6%E5%8C%96"class="anchor"aria-hidden="true"id="user-content-组件化"><span aria-hidden="true"class="octicon octicon-link"></span></a><del>组件化</del></h3><p>一份表单往往对应一个具体的业务场景，如果将带有业务逻辑的表单封装成一个个表单组件，复用程度很低。<p>要将一个表单组件用于多个类似的业务场景。 比如表单组件 A 用于：<code>Create User</code>、<code>Update User</code>、<code>User Detail</code>。<p>因为组件 A 要兼容三个业务场景，内部将会充斥着各种<code>if...else</code>。<p>后期需求一旦变更只能硬着头皮往后继续<code>if...else</code>。甚至一处修改 N 处 Bug。<p>这种程度的代码复用往往不如直接硬编码来得实在。<h3><a href="#%E9%85%8D%E7%BD%AE%E5%8C%96"class="anchor"aria-hidden="true"id="user-content-配置化"><span aria-hidden="true"class="octicon octicon-link"></span></a>配置化</h3><p>为什么不喜欢业务逻辑？<p>业务逻辑难抽象、难复用、修改频繁，本质上就是<code>if...else</code>。<p>与其想方设法让不同业务逻辑挤在同一个组件，不如让他们一个萝卜一个坑。<p>用一份配置文件描述表单与逻辑，然后通过某个公共组件渲染。<p>这样下来，一个业务场景对应一个表单，对应一份配置文件，使用同一个组件渲染。<p>配置文件该如何定义才能足够灵活？渲染组件如何应对各种配置？</section></article><footer class="footer-container"><section>Copyright &copy; 2020&nbsp;<a href="mailto:zowiegong@gmail.com">zowiegong</a>&nbsp;Powered by&nbsp;<a href="https://github.com/hexojs/hexo"target="_blank"rel="noopener noreferrer">Hexo</a>&nbsp;Theme by&nbsp;<a href="https://github.com/zowiegong/hexo-theme-os"target="_blank"rel="noopener noreferrer">OS.</a><br><a href="https://github.com/zowiegong/hexo-blog/edit/master/source/_posts/Thinking about configurable from.md"target="_blank">Edit source file</a></section></footer><div class="hover-pointer"id="scroll-to-top-container"><svg class="hover-fill"height="3rem "id="scroll-to-top-btn"version="1.1"viewBox="0 0 1024 1024"width="3rem"><path d="M825.568 555.328l-287.392-289.28C531.808 259.648 523.488 256.576 515.2 256.64 514.08 256.544 513.12 256 512 256c-4.672 0-9.024 1.088-13.024 2.88-4.032 1.536-7.872 3.872-11.136 7.136l-259.328 258.88c-12.512 12.48-12.544 32.736-0.032 45.248 6.24 6.272 14.432 9.408 22.656 9.408 8.192 0 16.352-3.136 22.624-9.344L480 364.288 480 928c0 17.696 14.336 32 32 32s32-14.304 32-32L544 362.72l236.192 237.728c6.24 6.272 14.496 9.44 22.688 9.44s16.32-3.104 22.56-9.312C838.016 588.128 838.048 567.84 825.568 555.328z"p-id="1100"></path><path d="M864 192 160 192C142.336 192 128 177.664 128 160s14.336-32 32-32l704 0c17.696 0 32 14.336 32 32S881.696 192 864 192z"p-id="1101"></path></svg></div><script>let pluginsConfig = JSON.parse('{"googleAnalytics":"UA-121105508-1","scrollToTop":true,"scrollSmooth":false,"comments":{"enable":true,"repo":"zowiegong/hexo-blog"}}')</script><script>pluginsConfig.comments.enable = true</script><script src="/js/script.js"></script>