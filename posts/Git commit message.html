<!DOCTYPE html><html lang="en"><title>Git commit message 规范化与校验 - OS</title><meta charset="utf-8"><meta name="description"content="Git commit message 规范化与校验"><meta name="keywords"><meta name="subtitle"content="Code &amp; Life"><meta name="author"content="zowiegong"><meta name="language"content="zh-CN"><meta name="timezone"content="Asia/Shanghai"><meta name="viewport"content="width=device-width,initial-scale=1"><link href="/manifest.json"rel="manifest"><link href="/atom.xml"rel="alternate"type="application/atom+xml"><link href="/images/favicon.ico"rel="shortcut icon"type="image/x-icon"><link href="/css/style.css"rel="stylesheet"><link href="/css/post.css"rel="stylesheet"><meta name="generator"content="Hexo 4.2.0"><header id="header-container"><h1 id="blog-title"><a href="/">OS</a></h1><nav><ul class="menu-list"><li class="menu-list-item"><a href="/categories"class="menu-name">categories</a><li class="menu-list-item"><a href="/tags"class="menu-name">tags</a><li class="menu-list-item"><a href="/about"class="menu-name">about</a></ul></nav></header><article class="main"><h1 id="post-title">Git commit message 规范化与校验</h1><div class="post-info"><time class="post-date">2019-07-03</time><ul class="tag-list"><li class="tag-item"><a href="/tags/notes/"class="tag-name">#notes</a></ul></div><section class="markdown-body"><h2><a href="#%E4%BD%BF%E7%94%A8-git-cz-%E4%BA%A4%E4%BA%92%E5%BC%8F%E6%8F%90%E4%BA%A4-commit"class="anchor"aria-hidden="true"id="user-content-使用-git-cz-交互式提交-commit"><span class="octicon octicon-link"aria-hidden="true"></span></a>使用 git-cz 交互式提交 commit</h2><p>安装 commitizen cli 命令行工具与 commitizen adapter 适配器（可以理解为 commit message 的模板）<pre><code>npm insatll commitizen cz-conventional-changelog --save-dev
</code></pre><p><code>package.json</code>中配置<code>script</code>与<code>config</code>字段。<p><code>config.commitizen.path</code>为适配器名或路径。<pre><code>  "script": {
    "commit": "git-cz"
  },
  ...
  "config": {
    "commitizen": {
      "path": "cz-conventional-changelog"
    }
  }
</code></pre><p>现在尝试使用<code>npm run commit</code>可以使用交互式模式提交 commit 了。<h2><a href="#%E6%A0%A1%E9%AA%8C-commit-message"class="anchor"aria-hidden="true"id="user-content-校验-commit-message"><span class="octicon octicon-link"aria-hidden="true"></span></a>校验 commit message</h2><p>安装 @commitlint/cli 命令行工具与 @commitlint/config-conventional 校验规则 npm 包。<div class="highlight highlight-source-shell"><pre><span class="pl-c"><span class="pl-c">#</span> 安装依赖</span>
npm install @commitlint/config-conventional @commitlint/cli husky --save-dev

<span class="pl-c"><span class="pl-c">#</span> 新建一个配置文件</span>
<span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span>module.exports = {extends: ['@commitlint/config-conventional']}<span class="pl-pds">"</span></span> <span class="pl-k">&gt;</span> commitlint.config.js</pre></div><p>配置 husky git hook。<pre><code>{
  "husky": {
    "hooks": {
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }  
  }
}
</code></pre><p>现在试着随便提交一些 commit message，不符合规则的则会被 commitlin 提示并取消这次提交。</section></article><footer class="footer-container"><section>Copyright &copy; 2020&nbsp;<a href="mailto:zowiegong@gmail.com">zowiegong</a>&nbsp;Powered by&nbsp;<a href="https://github.com/hexojs/hexo"target="_blank"rel="noopener noreferrer">Hexo</a>&nbsp;Theme by&nbsp;<a href="https://github.com/zowiegong/hexo-theme-os"target="_blank"rel="noopener noreferrer">OS.</a><br><a href="https://github.com/zowiegong/hexo-blog/edit/master/source/_posts/Git commit message.md"target="_blank">Edit source file</a></section></footer><div class="hover-pointer"id="scroll-to-top-container"><svg class="hover-fill"height="3rem "id="scroll-to-top-btn"version="1.1"viewBox="0 0 1024 1024"width="3rem"><path d="M825.568 555.328l-287.392-289.28C531.808 259.648 523.488 256.576 515.2 256.64 514.08 256.544 513.12 256 512 256c-4.672 0-9.024 1.088-13.024 2.88-4.032 1.536-7.872 3.872-11.136 7.136l-259.328 258.88c-12.512 12.48-12.544 32.736-0.032 45.248 6.24 6.272 14.432 9.408 22.656 9.408 8.192 0 16.352-3.136 22.624-9.344L480 364.288 480 928c0 17.696 14.336 32 32 32s32-14.304 32-32L544 362.72l236.192 237.728c6.24 6.272 14.496 9.44 22.688 9.44s16.32-3.104 22.56-9.312C838.016 588.128 838.048 567.84 825.568 555.328z"p-id="1100"></path><path d="M864 192 160 192C142.336 192 128 177.664 128 160s14.336-32 32-32l704 0c17.696 0 32 14.336 32 32S881.696 192 864 192z"p-id="1101"></path></svg></div><script>let pluginsConfig = JSON.parse('{"googleAnalytics":"UA-121105508-1","scrollToTop":true,"scrollSmooth":false,"comments":{"enable":true,"repo":"zowiegong/hexo-blog"}}')</script><script>pluginsConfig.comments.enable = true</script><script src="/js/script.js"></script>