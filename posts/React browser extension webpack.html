<!DOCTYPE html><html lang="en"><title>React 开发浏览器扩展 webpack 配置 - OS</title><meta charset="utf-8"><meta name="description"content="React 开发浏览器扩展 webpack 配置"><meta name="keywords"><meta name="subtitle"content="Code &amp; Life"><meta name="author"content="zowiegong"><meta name="language"content="zh-CN"><meta name="timezone"content="Asia/Shanghai"><meta name="viewport"content="width=device-width,initial-scale=1"><link href="/manifest.json"rel="manifest"><link href="/atom.xml"rel="alternate"type="application/atom+xml"><link href="/images/favicon.ico"rel="shortcut icon"type="image/x-icon"><link href="/css/style.css"rel="stylesheet"><link href="/css/post.css"rel="stylesheet"><meta name="generator"content="Hexo 4.2.0"><header id="header-container"><h1 id="blog-title"><a href="/">OS</a></h1><nav><ul class="menu-list"><li class="menu-list-item"><a href="/categories"class="menu-name">categories</a><li class="menu-list-item"><a href="/tags"class="menu-name">tags</a><li class="menu-list-item"><a href="/about"class="menu-name">about</a></ul></nav></header><article class="main"><h1 id="post-title">React 开发浏览器扩展 webpack 配置</h1><div class="post-info"><time class="post-date">2018-06-02</time><ul class="tag-list"><li class="tag-item"><a href="/tags/react/"class="tag-name">#react</a><li class="tag-item"><a href="/tags/webpack/"class="tag-name">#webpack</a></ul></div><section class="markdown-body"><h2><a href="#%E7%94%A8-webpack-%E4%B8%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%A9%E5%B1%95%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85"class="anchor"aria-hidden="true"id="user-content-用-webpack-为浏览器扩展项目打包"><span class="octicon octicon-link"aria-hidden="true"></span></a>用 webpack 为浏览器扩展项目打包</h2><p>浏览器扩展项目与普通 react 项目有些许差异，做个记录。<h3><a href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"class="anchor"aria-hidden="true"id="user-content-目录结构"><span class="octicon octicon-link"aria-hidden="true"></span></a>目录结构</h3><pre><code>├─ .babelrc
├─ .editorconfig
├─ .gitignore
├─ webpack.config.js
├─ package.json
├─ dist
└─ src
    ├─ manifest.json
    ├─ icons
    ├─ background
    │    └─ index.js
    ├─ content
    │    └─ index.js
    └─ popup
            ├─ index.html
            ├─ index.jsx
            └─ style.css
</code></pre><h3><a href="#%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96"class="anchor"aria-hidden="true"id="user-content-项目依赖"><span class="octicon octicon-link"aria-hidden="true"></span></a>项目依赖</h3><pre><code>npm install webpack\
 html-webpack-plugin\
 copy-webpack-plugin\
 clean-webpack-plugin\
 style-loader\
 css-loader\
 babel-core\
 babel-preset-react\
 babel-preset-env\
 babel-loader --save-dev

npm install react\
 react-dom --save
</code></pre><h3><a href="#webpack-%E9%85%8D%E7%BD%AE"class="anchor"aria-hidden="true"id="user-content-webpack-配置"><span class="octicon octicon-link"aria-hidden="true"></span></a>webpack 配置</h3><p><code>webpack.config.js</code><div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">path</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>path<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">CopyWebpackPlugin</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>copy-webpack-plugin<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">HtmlWebpackPlugin</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>html-webpack-plugin<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">CleanWebpackPlugin</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>clean-webpack-plugin<span class="pl-pds">'</span></span>)

<span class="pl-c1">module</span>.<span class="pl-smi">exports</span> <span class="pl-k">=</span> {
    entry<span class="pl-k">:</span> {
        backgournd<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/background/index.js<span class="pl-pds">'</span></span>,
        popup<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/popup/index.jsx<span class="pl-pds">'</span></span>
    },

    watch<span class="pl-k">:</span> <span class="pl-c1">true</span>,

    output<span class="pl-k">:</span> {
        path<span class="pl-k">:</span> <span class="pl-smi">path</span>.<span class="pl-en">resolve</span>(<span class="pl-c1">__dirname</span>, <span class="pl-s"><span class="pl-pds">'</span>../dist<span class="pl-pds">'</span></span>),
        filename<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>[name].bundle.js<span class="pl-pds">'</span></span>
    },

    resolve<span class="pl-k">:</span> {
        extensions<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>.js<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>.jsx<span class="pl-pds">'</span></span>]
    },

    devtool<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>inline-source-map<span class="pl-pds">'</span></span>,

    plugins<span class="pl-k">:</span> [
        <span class="pl-k">new</span> <span class="pl-en">CleanWebpackPlugin</span>([<span class="pl-s"><span class="pl-pds">'</span>dist<span class="pl-pds">'</span></span>]),
        <span class="pl-k">new</span> <span class="pl-en">HtmlWebpackPlugin</span>({
            inject<span class="pl-k">:</span> <span class="pl-c1">true</span>,
            chunks<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>popup<span class="pl-pds">'</span></span>],
            filename<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>popup.html<span class="pl-pds">'</span></span>,
            template<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/popup/index.html<span class="pl-pds">'</span></span>
        }),
        <span class="pl-k">new</span> <span class="pl-en">CopyWebpackPlugin</span>([
            { from<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/manifest.json<span class="pl-pds">'</span></span> },
            { from<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/icons/<span class="pl-pds">'</span></span>, to<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./icons<span class="pl-pds">'</span></span> }
        ])
    ],

    module<span class="pl-k">:</span> {
        rules<span class="pl-k">:</span> [
            {
                test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>css<span class="pl-k">$</span><span class="pl-pds">/</span></span>,
                use<span class="pl-k">:</span> [
                    <span class="pl-s"><span class="pl-pds">'</span>style-loader<span class="pl-pds">'</span></span>,
                    <span class="pl-s"><span class="pl-pds">'</span>css-loader<span class="pl-pds">'</span></span>
                ]
            },
            {
                test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>jsx<span class="pl-k">$</span><span class="pl-pds">/</span></span>,
                exclude<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span>node_modules<span class="pl-pds">/</span></span>,
                use<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>babel-loader<span class="pl-pds">'</span></span>],
            }
        ]
    }
}</pre></div><h3><a href="#babel-%E9%85%8D%E7%BD%AE"class="anchor"aria-hidden="true"id="user-content-babel-配置"><span class="octicon octicon-link"aria-hidden="true"></span></a>babel 配置</h3><p><code>.babelrc</code><div class="highlight highlight-source-json"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>presets<span class="pl-pds">"</span></span>: [
        <span class="pl-s"><span class="pl-pds">"</span>env<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>react<span class="pl-pds">"</span></span>
    ]
}</pre></div></section></article><footer class="footer-container"><section>Copyright &copy; 2020&nbsp;<a href="mailto:zowiegong@gmail.com">zowiegong</a>&nbsp;Powered by&nbsp;<a href="https://github.com/hexojs/hexo"target="_blank"rel="noopener noreferrer">Hexo</a>&nbsp;Theme by&nbsp;<a href="https://github.com/zowiegong/hexo-theme-os"target="_blank"rel="noopener noreferrer">OS.</a><br><a href="https://github.com/zowiegong/hexo-blog/edit/master/source/_posts/React browser extension webpack.md"target="_blank">Edit source file</a></section></footer><div class="hover-pointer"id="scroll-to-top-container"><svg class="hover-fill"height="3rem "id="scroll-to-top-btn"version="1.1"viewBox="0 0 1024 1024"width="3rem"><path d="M825.568 555.328l-287.392-289.28C531.808 259.648 523.488 256.576 515.2 256.64 514.08 256.544 513.12 256 512 256c-4.672 0-9.024 1.088-13.024 2.88-4.032 1.536-7.872 3.872-11.136 7.136l-259.328 258.88c-12.512 12.48-12.544 32.736-0.032 45.248 6.24 6.272 14.432 9.408 22.656 9.408 8.192 0 16.352-3.136 22.624-9.344L480 364.288 480 928c0 17.696 14.336 32 32 32s32-14.304 32-32L544 362.72l236.192 237.728c6.24 6.272 14.496 9.44 22.688 9.44s16.32-3.104 22.56-9.312C838.016 588.128 838.048 567.84 825.568 555.328z"p-id="1100"></path><path d="M864 192 160 192C142.336 192 128 177.664 128 160s14.336-32 32-32l704 0c17.696 0 32 14.336 32 32S881.696 192 864 192z"p-id="1101"></path></svg></div><script>let pluginsConfig = JSON.parse('{"googleAnalytics":"UA-121105508-1","scrollToTop":true,"scrollSmooth":false,"comments":{"enable":true,"repo":"zowiegong/hexo-blog"}}')</script><script>pluginsConfig.comments.enable = true</script><script src="/js/script.js"></script>